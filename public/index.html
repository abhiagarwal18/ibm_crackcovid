<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
      #map {
        height: 80%;
      }
    </style>
    <title>Crack the COVID</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.0/css/bulma.min.css"
    />
    <style type="text/css"></style>
  </head>

  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <h3 align="center" class="title is-3">Regression - Crack the COVID</h3>
    <p class="subtitle">
      <br /><br />Please find information regarding nearby hospitals, bed and
      test availability. Find the most suitable hospital for you. Also, find
      which places are following social distancing norms and wearing masks to
      make your outdoor trip safer.
    </p>
    <p align="right">
      <a href="/appid/login" id="login">Hospital Dashboard Login</a>
    </p>
    <p align="right">&nbsp;</p>
    <p align="right">
      <a href="/appid/logout" id="logout" style="display: none;">Logout</a>
    </p>

    <nav class="level">
      <div class="level-item has-text-centered">
        <div>
          <p class="heading">Hospitals Onboard</p>
          <p class="title">10</p>
        </div>
      </div>
      <div class="level-item has-text-centered">
        <div>
          <p class="heading">Beds Available</p>
          <p class="title">230</p>
        </div>
      </div>
      <div class="level-item has-text-centered">
        <div>
          <p class="heading">Places monitored</p>
          <p class="title">456</p>
        </div>
      </div>
      <div class="level-item has-text-centered">
        <div>
          <p class="heading">Safety Score Outside</p>
          <p class="title">67</p>
        </div>
      </div>
    </nav>
    <div class="columns">
      <div class="column">
        <div id="entries"></div>
      </div>
      <div class="column">
        <div id="map"></div>
        <script>
          // Note: This example requires that you consent to location sharing when
          // prompted by your browser. If you see the error "The Geolocation service
          // failed.", it means you probably did not give permission for the browser to
          // locate you.
          var marker, map, infoWindow;
          function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
              center: { lat: -34.397, lng: 150.644 },
              zoom: 6,
            });
            infoWindow = new google.maps.InfoWindow();

            // Try HTML5 geolocation.
            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(
                function (position) {
                  var pos = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude,
                  };

                  infoWindow.setPosition(pos);
                  infoWindow.setContent("Your Location");
                  infoWindow.open(map);
                  map.setCenter(pos);
                  marker = new google.maps.Marker({position: pos, map: map});
                },
                function () {
                  handleLocationError(true, infoWindow, map.getCenter());
                }
              );
            } else {
              // Browser doesn't support Geolocation
              handleLocationError(false, infoWindow, map.getCenter());
            }
          }

          function handleLocationError(browserHasGeolocation, infoWindow, pos) {
            infoWindow.setPosition(pos);
            infoWindow.setContent(
              browserHasGeolocation
                ? "Error: The Geolocation service failed."
                : "Error: Your browser doesn't support geolocation."
            );
            infoWindow.open(map);
          }
        </script>
      </div>
    </div>

    <script id="entries-template" type="text/x-handlebars-template">
      {{#each entries}}
        <div class="box">
          <article class="media">
            <div class="media-left">
              <figure class="image is-64x64">
                <img src="{{icon}}" alt="No Image" />
              </figure>
            </div>
            <div class="media-content">
              <div class="content">
                <p>
                  <strong>
                    {{hname}}
                  </strong>

                  <small>
                    {{hemail}}
                  </small>
                  <br />
                  {{haddress}}
                </p>
              </div>
            </div>
          </article>
        </div>
      {{/each}}
    </script>

    <script
      async
      defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBBaFr4NE35DZz-DW3K3WUObRAZGB9f3Sc&callback=initMap"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="guestbook.js"></script>

    <p>&nbsp;</p>
    <footer class="footer">
      <div class="content has-text-centered">
        <p>
          <strong>Regression</strong> by
          <a href="https://github.com/siddhant-99">Siddhant Dangi</a>
          <a href="https://github.com/siddhant-99">Jivat Neet Kaur</a>
          <a href="https://github.com/siddhant-99">Honnesh Rohmetra</a>
          <a href="https://github.com/siddhant-99">Abhishek Agarwal</a>
        </p>
      </div>
    </footer>
  </body>
</html>
